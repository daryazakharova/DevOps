## **Part 1. Установка ОС**
---
**Установлена Ubuntu 20.04 Server LTS без графического интерфейса, используя программу для виртуализации - VirtualBox.**  
1. Версия Ubuntu:  `cat /etc/issue.`  
 ![Узнать версию Ubuntu](image/1.png)  

## **Part 2. Создание пользователя**  
---  
**Создан пользователь, отличный от пользователя, который создавался при установке. Пользователь был добавлен в группу adm.**  
2.1. Создан пользователь:  `sudo adduser user_2`   
 ![команда для создания пользователя](image/2.1.png)   

2.2. Новый пользователь в выводе команды:  `cat /etc/passwd`  
 ![cat /etc/passwd](image/2.2.png)  

2.3. Пользователь добавлен в группу adm: `sudo usermod -aG adm user_2`  
Просмотр информации о пользователях в группе adm: `getent group adm`  
 ![sudo usermod -aG adm user_2](image/2.3.png) 

## **Part 3. Настройка сети ОС**  
---  
3.1. Задано название машины вида user-1: 
 - `sudo hostnamectl set-hostname user-1`  
 ![sudo hostnamectl set-hostname user-1](image/3.1.png) 
 - в файле также старое имя заменено на user-1 `sudo vim /etc/hosts`  
  ![sudo hostnamectl set-hostname user-1](image/3.1.2.png) 

3.2. Установлена временная зона, соответствующая текущему местоположению: `sudo timedatectl set-timezone Europe/Moscow`   
 ![sudo timedatectl set-timezone Europe/Moscow](image/3.2.png)  
 
3.3. Установлены `sudo apt install net-tools` и получены названия сетевых интерфейсов: `ifconfig`  
 ![ifconfig](image/3.3.png)  
 - lo (loopback device) – виртуальный интерфейс, присутствующий по умолчанию в любом Linux. Он используется для отладки сетевых программ и запуска серверных приложений на локальной машине. С этим интерфейсом всегда связан адрес 127.0.0.1. и маску подсети 255.0.0.0. У него есть dns-имя – localhost.  

3.4. Получен ip адрес устройства от DHCP сервера:  
`sudo ip addr show`  или  `hostname -I`
 ![sudo ip addr show](image/4.png)  
  -  DHCP (англ. Dynamic Host Configuration Protocol — протокол динамической настройки узла) — сетевой протокол, позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP.  

3.5. Определен внешний ip-адрес шлюза (ip): `wget -O - -q icanhazip.com`  
 ![wget -O - -q icanhazip.com](image/5.1.png)  
  и внутренний IP-адрес шлюза:  `ip rout show default`  
 ![ip rout show default](image/5.2.png)  

3.6. Заданы статичные настройки ip, gw, dns, с использованием публичного DNS сервера(1.1.1.1 или 8.8.8.8)  
 - Открываем файл: `sudo vim /etc/netplan/00-installer-config.yaml`  
 ![Задать статичные настройки](image/3.6.1.png) 
 - Меняем `dhcp4:true` на `dhcp4:false` и прописываем статичные настройки ip, gw, dns (1.1.1.1 и 8.8.8.8)
 ![Задать статичные настройки](image/3.6.2.png)  
 - Применяем внесенные изменения: `sudo netplan apply` и просматриваем новые маршруты в нашей системе: `ip route show`  
 ![sudo netplan apply](image/3.6.3.png)  

3.7. Виртуальная машина перезагружена `sudo reboot`  
   Проверено, что настройки соответствуют заданным в предыдущем пункте: `ifcongig` 
 ![ifcongig](image/3.7.1.png)  
 и для DNS: `systemd-resolve --status`  
 ![systemd-resolve --status](image/3.7.2.png) 

3.8. Пропингованы удаленные хосты 1.1.1.1 и ya.ru:  
`ping 1.1.1.1`  
 ![ping 1.1.1.1](image/3.8.1.png)    
`ping ya.ru` 
 ![ping ya.ru](image/3.8.2.png)   

## **Part 4. Обновление ОС**
---  
4.1. Обновлены системные пакеты до последней версии:  
`sudo apt update` и `sudo apt upgrade`

4.2. Повторный ввод команды обновления системных пакетов: `sudo apt upgrade`  
 ![сообщение, что обновления отсутствуют.](image/4.2.png)  

## **Part 5. Использование команды sudo**
---  
5.1. Дано разрешение пользователю, созданному в Part 2, выполнять команду sudo: `sudo usermod -aG sudo user_2`  
 
 -  sudo (англ. Substitute User and do, дословно «подменить пользователя и выполнить») — программа для системного администрирования UNIX-систем, позволяющая делегировать те или иные привилегированные ресурсы пользователям с ведением протокола работы. Основная идея — дать пользователям как можно меньше прав, при этом достаточных для решения поставленных задач.  

5.2. Заменен hostname ОС от имени пользователя, созданного в пункте Part 2 (используя sudo)  
 - Cмена пользователя на user_2: `su user_2`  
 - Заменa hostname ОС от имени пользователя user_2 на user-2:`sudo hostnamectl set-hostname user-2`  
 - Проверка имени hostname: `hostname` 
 - В файле также старое имя заменено на user-2: `sudo vim /etc/hosts`  
 ![sudo](image/5.png)  
 - Перезагрузка системы:  `sudo reboot`, для проверки изменения hostname  
 ![sudo](image/5.3.png) 

 
## **Part 6. Установка и настройка службы времени**
---  
6.1. Настроена служба автоматической синхронизации времени
 - Установливаем пакет синхронизации времени ntp: `sudo apt-get install ntp`  
 - Запускаем `sudo systemctl start ntp`  
 - Установливаем утилиту для синхронизации времени `sudo apt install systemd-timesyncd`  
 - Cинхронизируем `timedatectl set-ntp true`  
 - Вывод времени и часового пояса, в котором сейчас нахожусь: `timedatectl show`  
 ![timedatectl show](image/6.png) 

## **Part 7. Установка и использование текстовых редакторов**
---  
7.1. Установлены текстовые редакторы VIM, NANO, MCEDIT
`sudo apt install nano` и `sudo apt install mcedit`  

7.2. В каждом редакторе, создан файл test_X.txt, где X -- название редактора
 - VIM: `sudo vim test_VIM.txt`  
 - NANO: `sudo nano test_NANO.txt`  
 - MCEDIT: `sudo mcedit test_MCEDIT.txt`  

7.3. Прописан никнейм(daariopa) в каждом файле и закрыт с сохранением изменений
 - VIM: 
 Переводим открытый файл в режим редактирования текста нажатием клавиши `i`, прописываем никнейм(daariopa).  
 ![daariopa](image/7.3.1.png)    
 Выходим из режима редактирования нажатием клавиши `Esc`закрываем файл, сохранив внесенные изменения `:wq`.  
 - NANO: Прописываем никнейм(daariopa). 
 ![daariopa](image/7.3.2.png)  
 Для сохранения изменений в файле используем команду `Ctrl+O` и для выхода `Ctrl+X`.  
 - MCEDIT: Прописываем никнейм(daariopa).  
 ![daariopa](image/7.3.3.png)  
 Для сохранения изменений в файле используем команду `F2` и для выхода `F10`.    

7.4. В каждом редакторе открыт файл на редактирование, заменив никнейм на строку "21 School 21" и закрыт файл без сохранения изменений
 - VIM: Переводим открытый файл в режим редактирования текста нажатием клавиши `i`, прописываем 21 School 21.  
 ![21 School 21](image/7.4.1.png)  
 Выходим из режима редактирования нажатием клавиши `Esc`закрываем файл, не сохраняя изменения в файле `:q!`  
 - NANO: Прописываем 21 School 21.   
 ![21 School 21](image/7.4.2.png)  
 Для выхода используем команду `Ctrl+X` и подтверждаем без сохранения изменений `n`  
 - MCEDIT: Прописываем 21 School 21.   
 ![21 School 21](image/7.4.3.png)  
 Для выхода используем клавишу `F10` и подтверждаем без сохранения изменений выбирая клавишу `No`  

7.5. В каждом редакторе открыт файл на редактирование, файл отредактирован на строку "21 School 21", поиск по содержимому файла (21)
 - VIM: Для поиска по всему файлу использовала команду: `/21` 
 ![поиск 21](image/7.5.1.png)  
 - NANO: Для поиска по всему файлу использовала команду: `Ctrl+W`. При нахождении совпадения курсор перемещается под совпадающий символ.  
 ![поиск 21](image/7.5.2.png)  
 - MCEDIT: Для поиска по всему файлу использовала клавишу: `F7` и выбор клавиши `Find All`. При нахождении совпадения вся строка подсвчивается зеленым.  
 ![поиск 21](image/7.5.3.png)  
 
7.6. Замена слова поиска(School) на  home
 - VIM: Для замены использована конструкция:`:%s/School/home/g` 
 ![заменa слова](image/7.6.1.png)  
 - NANO: Сочетание клавиш `Alt+R` использовано для поиска(School) и замены(home) слов.
 ![замены слова](image/7.6.2.png)  
 - MCEDIT: Для поиска по всему файлу использовала клавишу `F7` и затем клавиша `F4`. Прописываем на какое слово заменяем и выбираем `Replace`.    
 ![замены слова](image/7.6.3.png)  

## **Part 8. Установка и базовая настройка сервиса SSHD**
---  
8.1. Установлена служба SSHd
 - Обновлен репозиторий командой: `sudo apt update`  
 - Установлен SSH с помощью команды: `sudo apt-get install ssh`  
 - Установлен OpenSSH:`sudo apt install openssh-server`  
 
8.2. Добавлен пакет SSH-сервера в автозагрузку: `sudo systemctl enable sshd`  
 - Проверена работа SSH: `systemctl status sshd `  
 ![systemctl status sshd](image/8.2.png)  

8.3. Перенастроена служба SSHd на порт 2022: 
 - Открываем конфигурационный файл в текстовом редакторе:`sudo vim /etc/ssh/sshd_config`  
 - В sshd_config заменяем порт 22 на 2022  
 ![2022](image/8.3.png)  
  - Чтобы изменения вступили в силу, перезапускаем SSH-сервер: `sudo systemctl restart sshd`  

8.4. Просмотр наличия процесса sshd: `ps -C sshd`  
 ![Наличие процесса sshd](image/8.4.png)  
 - Команда **ps** является очень гибким инструментом для определения работающих в системе программ и оценки используемых ими ресурсов. Она выводит статистику и информацию о состоянии процессов в системе, в том числе ИД процесса или нити, объем выполняемого ввода-вывода и используемый объем ресурсов процессора и памяти.
 Команда работает со следующими дополнительными ключами:   
 `ps -C` - поиск по имени процесса. 

8.5. Перезагрузка системы: `sudo reboot`  

8.6. Вывод команды `netstat -tan` содержит `tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`   
 ![netstat -tan](image/8.6.png)  
 - Команда `netstat`  - показывает статистику приема и отправки пакетов, а также информацию об ошибках приема и отправки.
   - `-t` - показывать TCP порты.  
   - `-a` - позволяет просмотреть сведения о состоянии всех всех активных подключений и портов.    
   - `-n` - показывать сетевые адреса как числа(ip адрес). netstat обычно показывает адреса как символы. Эту опцию можно использовать с любым форматом показа.   
 - Значение каждого столбца вывода `netstat`:
   - `Proto` - протокол (tcp, udp, raw), используемый сокетом.
   - `Recv-Q` - количество байтов, не скопированных пользовательской программой, подключенной к этому сокету.
   - `Send-Q` - количество байтов, не подтвержденных удаленным хостом.
   - `Local Address` -  адрес и номер порта локального конца сокета. Если не указан параметр --numeric (-n), адрес сокета преобразуется в его каноническое имя хоста (FQDN), а номер порта преобразуется в соответствующее имя службы.
   - `Foreign Address` - адрес и номер порта удаленного конца сокета. Аналогичен «Локальному адресу».
   - `State` -  состояние socket. Состояние LISTEN означает, что сокет ожидает входящих подключений.
 - Значение `0.0.0.0` обозначает что сокет веб-сервера прослушивает любые доступные адреса.

## **Part 9. Установка и использование утилит top, htop**
---  
9.1. Установлены утилиты top и htop: `sudo apt install top/htop`  

9.2. Запущены утилиты top: `top` и htop: `htop` 

9.3. С помощью утилиты top определено: 
 ![top](image/9.3.png)  
 - Uptime: `58 min`  
 - Количество авторизованных пользователей:`1`   
 - Общую загрузку системы(load avarage):`0.00, 0.00, 0.00`  
 - Общее количество процессов(Tasks): `91 total, 1 running, 90 sleeping, 0 stopped, 0 zombie`  
 - Загрузку cpu: `0,0 us, 0,3 su, 0,0 ni, 99,7 id, 0,0 wa, 0,0 hi, 0,0 si, 0,0 st`  
 - Загрузку памяти(Mib Mem): `965,1 total, 430,6 free, 124,4 used, 392.1 buff/cache`  
 - Pid процесса занимающего больше всего памяти `Shift+M` : `644`   
 - Pid процесса, занимающего больше всего процессорного времени`Shift+T` : `1052`  

9.4. С помощью утилиты команды htop получена информация о запущенных процессах, отсортированные `F6`:  
 - по PID:      
 ![PID](image/9.4.1.png)  
 - по PERCENT_CPU:   
 ![PERCENT_CPU](image/9.4.2.png) 
 - по PERCENT_MEM:   
 ![PERCENT_MEM](image/9.4.3.png) 
 - по TIME:      
 ![TIME](image/9.4.4.png) 
 - отфильтрованному `F4` для процесса sshd:  
 ![sshd](image/9.4.5.png)  
 - найденный процесс syslog, используя поиск `F3`:  
 ![syslog](image/9.4.6.png)  
 - с добавленным выводом hostname, clock и uptime `F2`:  
 ![hostname, clock и uptime](image/9.4.7.png)  

## **Part 10. Использование утилиты fdisk**
---  
10.1. Запуск команды `sudo fdisk -l`  
 ![fdisk -l](image/10.1.png)  
   Отчет по команде `sudo fdisk -l`:  
 - Название жесткого диска:  `/dev/sda`
 - Размер жесткого диска:  `10GiB`
 - Количество секторов:  `20971520`
 - Размер swap, используя команду `swapon`:  `1.5G`

## **Part  11. Использование утилиты df**
---  
11.1.Запуск команды `df`  
 ![df](image/11.1.png)  
Отчёт для корневого раздела (/):   
 - Размер раздела: `8408452`  
 - Размер занятого пространства: `4534256`  
 - Размер свободного пространства: `3425480`  
 - Процент использования: `57`   
 - Определена единица измерения в выводе: `1k-blocks`  

11.2. Запуск команды `df -Th`  
 ![df -Th](image/11.2.png)    
Отчёт для корневого раздела (/):  
 - Размер раздела: `8.1G`  
 - Размер занятого пространства: `4.4G`  
 - Размер свободного пространства: `3.3G`  
 - Процент использования: `57`  
 - Определен тип файловой системы для раздела: `ext4`   

## **Part 12. Использование утилиты du**
---  
12.1. Запуск команды `sudo du`  
 ![du](image/12.1.png)  

12.2. Вывод размер папок /home, /var, /var/log.  
B байтах `sudo du -sb`:                     
 ![du](image/12.2.1.png)  
B человекочитаемом виде `sudo du -sh`:     
 ![du](image/12.2.2.png) 

12.3. Вывод размера всего содержимого в /var/log, используя *  
`sudo du -h /var/log/*`  
 ![sudo du -h](image/12.3.png)  

## **Part 13. Установка и использование утилиты ncdu**
---  
13.1. Установлена утилита ncdu  
`sudo apt install ncdu`  
 ![ncdu](image/13.1.png)  

13.2. Вывод размер папок:
 - `sudo ncdu /home`   
 ![home](image/13.2.1.png)   
 - `sudo ncdu /var`  
 ![var](image/13.2.2.png)     
 - `sudo ncdu /var/log`     
 ![var/log](image/13.2.3.png)    

## **Part 14. Работа с системными журналами**
---  
14.1. Просмотрены:
- `tail /var/log/dmesg`  
 ![Открыть для просмотра /var/log/dmesg](image/14.1.1.png)  
- `tail /var/log/syslog`  
 ![Открыть для просмотра /var/log/syslog](image/14.1.2.png)  
- `tail /var/log/auth.log` 
 ![Открыть для просмотра /var/log/auth.log](image/14.1.3.png)   
- `tail /var/log/auth.log | grep login` 
 ![Открыть для просмотра /var/log/auth.log](image/14.1.4.png)
   - Время последней успешной авторизации: `Sep 10 21:49:15`  
   - Имя пользователя: `daariopa`   
   - Метод входа в систему: `systemd-login`    

14.2. Перезапуск службы SSHd `sudo service ssh restart`  
Cкрин с сообщением о рестарте службы `grep restart /var/log/auth.log` 
 ![grep restart /var/log/auth.log](image/14.2.png) 

## **Part 15. Использование планировщика заданий CRON**
---  
15.1. Установка cron.
 - Перед установкой cron обновляем локальный индекс пакетов компьютера: `sudo apt update`  
 - Затем установливаем cron с помощью следующей команды: `sudo apt install cron`  
 - Также нужно убедиться, что он настроен для работы в фоновом режиме: `sudo systemctl enable cron`  
 ![sudo systemctl enable cron ](image/15.1.png)  

15.2 Используя планировщик заданий, запуск команды uptime через каждые 2 минуты.
 - Открывает конфигурационный файл: `crontab -e`  
 И прописываем запуск команды uptime через каждые 2 минуты: 
 `*/2 * * * * uptime`  
 ![*/2 * * * * uptime ](image/15.2.png)  
 - После ввода параметров сохраняем параметры редактора, нажав на клавишу `F2`, а затем покинуть конфигурационный файл - `F10`.  

15.3. Поиск в системных журналах строчки о выполнении:  
`tail /var/log/syslog`   
 ![скрины со строчками о выполнении](image/15.3.png)  

15.4. Вывод на экран список текущих заданий для CRON: `crontab -l`    
 ![crontab -l](image/15.4.png) 

15.5. Удаление всех заданий из планировщика заданий и вывод на экран список текущих заданий для CRON: `crontab -l`    
 ![списoк текущих задач для CRON](image/15.5.png)   

